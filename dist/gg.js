"use strict";var GG=function GG(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var GGE={};var GGI={};var GG_Config={parentID:null,canvasID:null,width:800,height:600,topLeft:false};var GG_Experimental=function GG_Experimental(){var gl=GGI.gl;var vertexShaderSrc="\n    attribute vec2 a_position;\n    uniform vec2 u_resolution;\n    void main() {\n      // normalize pixels\n      vec2 zeroToOne = a_position / u_resolution;\n\n      // 0->1 to 0->2\n      vec2 zeroToTwo = zeroToOne * 2.0;\n\n      // 0->2 to -1->1\n      vec2 clipSpace = zeroToTwo - 1.0;\n\n      gl_Position = vec4(clipSpace".concat(GGI.config.topLeft?" * vec2(1, -1)":"",", 0, 1);\n    }\n  ");var fragmentShaderSrc="\n    precision mediump float;\n    uniform vec4 u_color;\n    void main() {\n      gl_FragColor = u_color;\n    }\n  ";var createShader=function createShader(gl,type,source){var shader=gl.createShader(type);gl.shaderSource(shader,source);gl.compileShader(shader);var success=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(success)return shader;console.warn("There was a problem creating the shader: "+gl.getShaderInfoLog(shader));gl.deleteShader(shader)};var vertexShader=createShader(gl,gl.VERTEX_SHADER,vertexShaderSrc);var fragmentShader=createShader(gl,gl.FRAGMENT_SHADER,fragmentShaderSrc);var createProgram=function createProgram(gl,vertexShader,fragmentShader){var program=gl.createProgram();gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);var success=gl.getProgramParameter(program,gl.LINK_STATUS);if(success)return program;console.warn("There was a problem creating the GL program: "+gl.getProgramInfoLog(program));gl.deleteProgram(program)};var program=createProgram(gl,vertexShader,fragmentShader);var positionAttribLoc=gl.getAttribLocation(program,"a_position");var resolutionUniLoc=gl.getUniformLocation(program,"u_resolution");var colorUniLoc=gl.getUniformLocation(program,"u_color");var positionBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);var positions=[10,20,80,20,10,30,10,30,80,20,80,30];gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(positions),gl.STATIC_DRAW);gl.viewport(0,0,gl.canvas.width,gl.canvas.height);gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT);gl.useProgram(program);gl.enableVertexAttribArray(positionAttribLoc);gl.uniform2f(resolutionUniLoc,gl.canvas.width,gl.canvas.height);gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);var size=2;var type=gl.FLOAT;var normalize=false;var stride=0;var offset=0;gl.vertexAttribPointer(positionAttribLoc,size,type,normalize,stride,offset);for(var ii=0;ii<50;++ii){setRectangle(gl,randomInt(300),randomInt(300),randomInt(300),randomInt(300));gl.uniform4f(colorUniLoc,Math.random(),Math.random(),Math.random(),1);gl.drawArrays(gl.TRIANGLES,0,6)}function randomInt(range){return Math.floor(Math.random()*range)}function setRectangle(gl,x,y,width,height){var x1=x;var x2=x+width;var y1=y;var y2=y+height;gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([x1,y1,x2,y1,x1,y2,x1,y2,x2,y1,x2,y2]),gl.STATIC_DRAW)}};var GG_Setup=function GG_Setup(){GGI.config=Object.assign(GG_Config,config);if(GGI.config.canvasID){var providedCanvas=document.getElementById(GGI.config.canvasID);if(providedCanvas instanceof HTMLCanvasElement){GGI.canvas=providedCanvas;if(config.width)GGI.canvas.width=GGI.config.width;if(config.height)GGI.canvas.height=GGI.config.height}else{console.warn("The provided canvasID was invalid.")}}if(!(GGI.canvas instanceof HTMLCanvasElement)){GGI.canvas=document.createElement("canvas");GGI.canvas.width=GGI.config.width;GGI.canvas.height=GGI.config.height;document.body.appendChild(GGI.canvas)}if(GGI.config.parentID){var parent=document.getElementById(GGI.config.parentID);if(parent){parent.appendChild(GGI.canvas)}else{console.warn("The provided parentID was invalid.")}}var gl=GGI.canvas.getContext("webgl")||GGI.canvas.getContext("experimental-webgl");if(gl===null)throw Error("WebGL is not supported.");else GGI.gl=gl;GG_Experimental()};GG_Setup();return GGE};